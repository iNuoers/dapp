(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1097:function(t,e,r){t.exports=r(1098)},1098:function(t,e,r){(function(e){const n=r(1099),o=r(614);var c=function(){};function l(t){return t.startsWith("int[")?"int256"+t.slice(3):"int"===t?"int256":t.startsWith("uint[")?"uint256"+t.slice(4):"uint"===t?"uint256":t.startsWith("fixed[")?"fixed128x128"+t.slice(5):"fixed"===t?"fixed128x128":t.startsWith("ufixed[")?"ufixed128x128"+t.slice(6):"ufixed"===t?"ufixed128x128":t}function h(t){return parseInt(/^\D+(\d+)$/.exec(t)[1],10)}function d(t){var e=/^\D+(\d+)x(\d+)$/.exec(t);return[parseInt(e[1],10),parseInt(e[2],10)]}function f(t){var e=t.match(/(.*)\[(.*?)\]$/);return e?""===e[2]?"dynamic":parseInt(e[2],10):null}function w(t){var e=typeof t;if("string"===e)return n.isHexPrefixed(t)?new o(n.stripHexPrefix(t),16):new o(t,10);if("number"===e)return new o(t);if(t.toArray)return t;throw new Error("Argument is not a number")}function v(t){var e=/^(\w+)\((.*)\)$/.exec(t);if(3!==e.length)throw new Error("Invalid method signature");var r=/^(.+)\):\((.+)$/.exec(e[2]);if(null!==r&&3===r.length)return{method:e[1],args:r[1].split(","),retargs:r[2].split(",")};var n=e[2].split(",");return 1===n.length&&""===n[0]&&(n=[]),{method:e[1],args:n}}function y(t,r){var c,l,v,i;if("address"===t)return y("uint160",w(r));if("bool"===t)return y("uint8",r?1:0);if("string"===t)return y("bytes",e.from(r,"utf8"));if(E(t)){if(void 0===r.length)throw new Error("Not an array?");if("dynamic"!==(c=f(t))&&0!==c&&r.length>c)throw new Error("Elements exceed array size: "+c);for(i in v=[],t=t.slice(0,t.lastIndexOf("[")),"string"==typeof r&&(r=JSON.parse(r)),r)v.push(y(t,r[i]));if("dynamic"===c){var m=y("uint256",r.length);v.unshift(m)}return e.concat(v)}if("bytes"===t)return r=e.from(r),v=e.concat([y("uint256",r.length),r]),r.length%32!=0&&(v=e.concat([v,n.zeros(32-r.length%32)])),v;if(t.startsWith("bytes")){if((c=h(t))<1||c>32)throw new Error("Invalid bytes<N> width: "+c);return n.setLengthRight(r,32)}if(t.startsWith("uint")){if((c=h(t))%8||c<8||c>256)throw new Error("Invalid uint<N> width: "+c);if((l=w(r)).bitLength()>c)throw new Error("Supplied uint exceeds width: "+c+" vs "+l.bitLength());if(l<0)throw new Error("Supplied uint is negative");return l.toArrayLike(e,"be",32)}if(t.startsWith("int")){if((c=h(t))%8||c<8||c>256)throw new Error("Invalid int<N> width: "+c);if((l=w(r)).bitLength()>c)throw new Error("Supplied int exceeds width: "+c+" vs "+l.bitLength());return l.toTwos(256).toArrayLike(e,"be",32)}if(t.startsWith("ufixed")){if(c=d(t),(l=w(r))<0)throw new Error("Supplied ufixed is negative");return y("uint256",l.mul(new o(2).pow(new o(c[1]))))}if(t.startsWith("fixed"))return c=d(t),y("int256",w(r).mul(new o(2).pow(new o(c[1]))));throw new Error("Unsupported or invalid type: "+t)}function m(t,data,r){var n,c,l,i;if("string"==typeof t&&(t=k(t)),"address"===t.name)return m(t.rawType,data,r).toArrayLike(e,"be",20).toString("hex");if("bool"===t.name)return m(t.rawType,data,r).toString()===new o(1).toString();if("string"===t.name){var h=m(t.rawType,data,r);return e.from(h,"utf8").toString()}if(t.isArray){for(l=[],n=t.size,"dynamic"===t.size&&(r=m("uint256",data,r).toNumber(),n=m("uint256",data,r).toNumber(),r+=32),i=0;i<n;i++){var d=m(t.subArray,data,r);l.push(d),r+=t.subArray.memoryUsage}return l}if("bytes"===t.name)return r=m("uint256",data,r).toNumber(),n=m("uint256",data,r).toNumber(),data.slice(r+32,r+32+n);if(t.name.startsWith("bytes"))return data.slice(r,r+t.size);if(t.name.startsWith("uint")){if((c=new o(data.slice(r,r+32),16,"be")).bitLength()>t.size)throw new Error("Decoded int exceeds width: "+t.size+" vs "+c.bitLength());return c}if(t.name.startsWith("int")){if((c=new o(data.slice(r,r+32),16,"be").fromTwos(256)).bitLength()>t.size)throw new Error("Decoded uint exceeds width: "+t.size+" vs "+c.bitLength());return c}if(t.name.startsWith("ufixed")){if(n=new o(2).pow(new o(t.size[1])),!(c=m("uint256",data,r)).mod(n).isZero())throw new Error("Decimals not supported yet");return c.div(n)}if(t.name.startsWith("fixed")){if(n=new o(2).pow(new o(t.size[1])),!(c=m("int256",data,r)).mod(n).isZero())throw new Error("Decimals not supported yet");return c.div(n)}throw new Error("Unsupported or invalid type: "+t.name)}function k(t){var e,r,n;if(E(t)){e=f(t);var o=t.slice(0,t.lastIndexOf("["));return o=k(o),r={isArray:!0,name:t,size:e,memoryUsage:"dynamic"===e?32:o.memoryUsage*e,subArray:o}}switch(t){case"address":n="uint160";break;case"bool":n="uint8";break;case"string":n="bytes"}if(r={rawType:n,name:t,memoryUsage:32},t.startsWith("bytes")&&"bytes"!==t||t.startsWith("uint")||t.startsWith("int")?r.size=h(t):(t.startsWith("ufixed")||t.startsWith("fixed"))&&(r.size=d(t)),t.startsWith("bytes")&&"bytes"!==t&&(r.size<1||r.size>32))throw new Error("Invalid bytes<N> width: "+r.size);if((t.startsWith("uint")||t.startsWith("int"))&&(r.size%8||r.size<8||r.size>256))throw new Error("Invalid int/uint<N> width: "+r.size);return r}function x(t){return"string"===t||"bytes"===t||"dynamic"===f(t)}function E(t){return t.lastIndexOf("]")===t.length-1}function H(t,e){return t.startsWith("address")||t.startsWith("bytes")?"0x"+e.toString("hex"):e.toString()}c.eventID=function(t,r){var o=t+"("+r.map(l).join(",")+")";return n.keccak256(e.from(o))},c.methodID=function(t,e){return c.eventID(t,e).slice(0,4)},c.rawEncode=function(t,r){var output=[],data=[],n=0;t.forEach((function(t){if(E(t)){var e=f(t);n+="dynamic"!==e?32*e:32}else n+=32}));for(var i=0;i<t.length;i++){var o=l(t[i]),c=y(o,r[i]);x(o)?(output.push(y("uint256",n)),data.push(c),n+=c.length):output.push(c)}return e.concat(output.concat(data))},c.rawDecode=function(t,data){var r=[];data=e.from(data);for(var n=0,i=0;i<t.length;i++){var o=k(l(t[i])),c=m(o,data,n);n+=o.memoryUsage,r.push(c)}return r},c.simpleEncode=function(t){var r=Array.prototype.slice.call(arguments).slice(1),n=v(t);if(r.length!==n.args.length)throw new Error("Argument count mismatch");return e.concat([c.methodID(n.method,n.args),c.rawEncode(n.args,r)])},c.simpleDecode=function(t,data){var e=v(t);if(!e.retargs)throw new Error("No return values in method");return c.rawDecode(e.retargs,data)},c.stringify=function(t,e){var r=[];for(var i in t){var n=t[i],o=e[i];o=/^[^\[]+\[.*\]$/.test(n)?o.map((function(t){return H(n,t)})).join(", "):H(n,o),r.push(o)}return r},c.solidityHexValue=function(t,r,o){var l,d;if(E(t)){var v=t.replace(/\[.*?\]/,"");if(!E(v)){var y=f(t);if("dynamic"!==y&&0!==y&&r.length>y)throw new Error("Elements exceed array size: "+y)}var m=r.map((function(t){return c.solidityHexValue(v,t,256)}));return e.concat(m)}if("bytes"===t)return r;if("string"===t)return e.from(r,"utf8");if("bool"===t){o=o||8;var k=Array(o/4).join("0");return e.from(r?k+"1":k+"0","hex")}if("address"===t){var x=20;return o&&(x=o/8),n.setLengthLeft(r,x)}if(t.startsWith("bytes")){if((l=h(t))<1||l>32)throw new Error("Invalid bytes<N> width: "+l);return n.setLengthRight(r,l)}if(t.startsWith("uint")){if((l=h(t))%8||l<8||l>256)throw new Error("Invalid uint<N> width: "+l);if((d=w(r)).bitLength()>l)throw new Error("Supplied uint exceeds width: "+l+" vs "+d.bitLength());return o=o||l,d.toArrayLike(e,"be",o/8)}if(t.startsWith("int")){if((l=h(t))%8||l<8||l>256)throw new Error("Invalid int<N> width: "+l);if((d=w(r)).bitLength()>l)throw new Error("Supplied int exceeds width: "+l+" vs "+d.bitLength());return o=o||l,d.toTwos(l).toArrayLike(e,"be",o/8)}throw new Error("Unsupported or invalid type: "+t)},c.solidityPack=function(t,r){if(t.length!==r.length)throw new Error("Number of types are not matching the values");for(var n=[],i=0;i<t.length;i++){var o=l(t[i]),h=r[i];n.push(c.solidityHexValue(o,h,null))}return e.concat(n)},c.soliditySHA3=function(t,e){return n.keccak256(c.solidityPack(t,e))},c.soliditySHA256=function(t,e){return n.sha256(c.solidityPack(t,e))},c.solidityRIPEMD160=function(t,e){return n.ripemd160(c.solidityPack(t,e),!0)},c.fromSerpent=function(t){for(var e,r=[],i=0;i<t.length;i++){var n=t[i];if("s"===n)r.push("bytes");else if("b"===n){for(var o="bytes",c=i+1;c<t.length&&((e=t[c])>="0"&&e<="9");)o+=t[c]-"0",c++;i=c-1,r.push(o)}else if("i"===n)r.push("int256");else{if("a"!==n)throw new Error("Unsupported or invalid type: "+n);r.push("int256[]")}}return r},c.toSerpent=function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i];if("bytes"===r)e.push("s");else if(r.startsWith("bytes"))e.push("b"+h(r));else if("int256"===r)e.push("i");else{if("int256[]"!==r)throw new Error("Unsupported or invalid type: "+r);e.push("a")}}return e.join("")},t.exports=c}).call(this,r(609).Buffer)},1262:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1263);e.BlockAndLogStreamer=n.BlockAndLogStreamer},1263:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,c){function l(t){try{d(n.next(t))}catch(t){c(t)}}function h(t){try{d(n.throw(t))}catch(t){c(t)}}function d(t){t.done?o(t.value):new r((function(e){e(t.value)})).then(l,h)}d((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,body){var e,r,n,g,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,r&&(n=2&c[0]?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){o.label=c[1];break}if(6===c[0]&&o.label<n[1]){o.label=n[1],n=c;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(c);break}n[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],r=0}finally{e=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}};Object.defineProperty(e,"__esModule",{value:!0});var c=r(1264),l=r(1265),h=r(1266),d=r(1267),f=function(t,e,r,f){var v=this;if(this.lastKnownGoodBlockHistory=h.List(),this.blockHistory=Promise.resolve(this.lastKnownGoodBlockHistory),this.lastKnownGoodLogHistory=h.List(),this.logHistory=Promise.resolve(this.lastKnownGoodLogHistory),this.pendingCallbacks=[],this.onError=function(){},this.logFilters={},this.onBlockAddedSubscribers={},this.onBlockRemovedSubscribers={},this.onLogsAddedSubscribers={},this.onLogsRemovedSubscribers={},this.reconcileNewBlock=function(t){return n(v,void 0,void 0,(function(){var e,r,n;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),this.blockHistory=c.reconcileBlockHistory(this.getBlockByHash,this.blockHistory,t,this.onBlockAdded,this.onBlockRemoved,this.blockRetention),[4,this.blockHistory];case 1:return e=o.sent(),[4,this.logHistory];case 2:return r=o.sent(),this.lastKnownGoodBlockHistory=e,this.lastKnownGoodLogHistory=r,this.pendingCallbacks.forEach((function(t){return t()})),this.pendingCallbacks=[],[3,4];case 3:throw n=o.sent(),this.blockHistory=Promise.resolve(this.lastKnownGoodBlockHistory),this.logHistory=Promise.resolve(this.lastKnownGoodLogHistory),this.pendingCallbacks=[],n;case 4:return[2]}}))}))},this.onBlockAdded=function(t){return n(v,void 0,void 0,(function(){var e,r=this;return o(this,(function(n){switch(n.label){case 0:return Object.keys(this.onBlockAddedSubscribers).map((function(t){return r.onBlockAddedSubscribers[t]})).map((function(t){return w(t,r.onError)})).forEach((function(e){return r.pendingCallbacks.push((function(){return e(t)}))})),e=Object.keys(this.logFilters).map((function(t){return r.logFilters[t]})),this.logHistory=l.reconcileLogHistoryWithAddedBlock(this.getLogs,this.logHistory,t,this.onLogsAdded,e,this.blockRetention),[4,this.logHistory];case 1:return n.sent(),[2]}}))}))},this.onBlockRemoved=function(t){return n(v,void 0,void 0,(function(){var e=this;return o(this,(function(r){switch(r.label){case 0:return this.logHistory=l.reconcileLogHistoryWithRemovedBlock(this.logHistory,t,this.onLogsRemoved),[4,this.logHistory];case 1:return r.sent(),Object.keys(this.onBlockRemovedSubscribers).map((function(t){return e.onBlockRemovedSubscribers[t]})).map((function(t){return w(t,e.onError)})).forEach((function(r){return e.pendingCallbacks.push((function(){return r(t)}))})),[2]}}))}))},this.onLogsAdded=function(t,e){return n(v,void 0,void 0,(function(){var r=this;return o(this,(function(n){return Object.keys(this.onLogsAddedSubscribers).map((function(t){return r.onLogsAddedSubscribers[t]})).map((function(t){return w(t,r.onError)})).forEach((function(n){return r.pendingCallbacks.push((function(){return n(t,e)}))})),[2]}))}))},this.onLogsRemoved=function(t,e){return n(v,void 0,void 0,(function(){var r=this;return o(this,(function(n){return Object.keys(this.onLogsRemovedSubscribers).map((function(t){return r.onLogsRemovedSubscribers[t]})).map((function(t){return w(t,r.onError)})).forEach((function(n){return r.pendingCallbacks.push((function(){return n(t,e)}))})),[2]}))}))},this.getLatestReconciledBlock=function(){return v.lastKnownGoodBlockHistory.isEmpty()?null:v.lastKnownGoodBlockHistory.last()},this.addLogFilter=function(filter){var t="log filter token "+d();return v.logFilters[t]=filter,t},this.removeLogFilter=function(t){if(!t.startsWith("log filter token "))throw new Error("Expected a log filter token.  Actual: "+t);delete v.logFilters[t]},this.subscribeToOnBlockAdded=function(t){var e="on block added token "+d();return v.onBlockAddedSubscribers[e]=t,e},this.unsubscribeFromOnBlockAdded=function(t){if(!t.startsWith("on block added token "))throw new Error("Expected a block added subscription token.  Actual: "+t);delete v.onBlockAddedSubscribers[t]},this.subscribeToOnBlockRemoved=function(t){var e="on block removed token "+d();return v.onBlockRemovedSubscribers[e]=t,e},this.unsubscribeFromOnBlockRemoved=function(t){if(!t.startsWith("on block removed token "))throw new Error("Expected a block added subscription token.  Actual: "+t);delete v.onBlockRemovedSubscribers[t]},this.subscribeToOnLogsAdded=function(t){var e="on log added token "+d();return v.onLogsAddedSubscribers[e]=t,e},this.unsubscribeFromOnLogsAdded=function(t){if(!t.startsWith("on log added token "))throw new Error("Expected a log added subscription token.  Actual: "+t);delete v.onLogsAddedSubscribers[t]},this.subscribeToOnLogsRemoved=function(t){var e="on log removed token "+d();return v.onLogsRemovedSubscribers[e]=t,e},this.unsubscribeFromOnLogsRemoved=function(t){if(!t.startsWith("on log removed token "))throw new Error("Expected a log added subscription token.  Actual: "+t);delete v.onLogsRemovedSubscribers[t]},void 0===t)throw new Error("getBlockByHash must be provided");if(this.getBlockByHash=t,void 0===e)throw new Error("getLogs must be provided");if(this.getLogs=e,void 0===r)throw new Error("onError must be provided");this.onError=r,this.blockRetention=f&&f.blockRetention?f.blockRetention:100};function w(t,e){return function(r,n){try{t(r,n)}catch(t){e(t)}}}e.BlockAndLogStreamer=f},1264:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,c){function l(t){try{d(n.next(t))}catch(t){c(t)}}function h(t){try{d(n.throw(t))}catch(t){c(t)}}function d(t){t.done?o(t.value):new r((function(e){e(t.value)})).then(l,h)}d((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,body){var e,r,n,g,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,r&&(n=2&c[0]?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){o.label=c[1];break}if(6===c[0]&&o.label<n[1]){o.label=n[1],n=c;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(c);break}n[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],r=0}finally{e=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},c=this;Object.defineProperty(e,"__esModule",{value:!0});var l=r(862);e.reconcileBlockHistory=function(t,e,r,l,E,H){return void 0===H&&(H=100),n(c,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,e];case 1:return e=n.sent(),v(e)?[4,f(e,r,l,H)]:[3,3];case 2:return[2,n.sent()];case 3:return y(e,r)?[4,h(e,E)]:[3,6];case 4:return e=n.sent(),[4,f(e,r,l,H)];case 5:return[2,n.sent()];case 6:return m(e,r)?[2,e]:k(e,r)?[4,f(e,r,l,H)]:[3,8];case 7:return[2,n.sent()];case 8:if(!x(e,r))return[3,13];n.label=9;case 9:return e.last().hash===r.parentHash?[3,11]:[4,w(e,E)];case 10:return e=n.sent(),[3,9];case 11:return[4,f(e,r,l,H)];case 12:return[2,n.sent()];case 13:return[4,d(t,e,r,l,E,H)];case 14:return[2,n.sent()]}}))}))};var h=function(t,e){return n(c,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return t.isEmpty()?[3,2]:[4,w(t,e)];case 1:return t=r.sent(),[3,0];case 2:return[2,t]}}))}))},d=function(t,r,d,f,w,v){return n(c,void 0,void 0,(function(){var n;return o(this,(function(o){switch(o.label){case 0:return"0x0000000000000000000000000000000000000000000000000000000000000000"!==d.parentHash?[3,2]:[4,h(r,w)];case 1:case 4:case 7:return[2,o.sent()];case 2:return[4,t(d.parentHash)];case 3:if(null===(n=o.sent()))throw new Error("Failed to fetch parent block.");return l.parseHexInt(n.number)+v<l.parseHexInt(r.last().number)?[4,h(r,w)]:[3,5];case 5:return[4,e.reconcileBlockHistory(t,r,n,f,w,v)];case 6:return r=o.sent(),[4,e.reconcileBlockHistory(t,r,d,f,w,v)]}}))}))},f=function(t,e,r,l){return n(c,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:if(!t.isEmpty()&&t.last().hash!==e.parentHash)throw new Error("New head block's parent isn't our current head.");return[4,r(e)];case 1:return n.sent(),[2,(t=t.push(e)).takeLast(l).toList()]}}))}))},w=function(t,e){return n(c,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:return r=t.last(),t=t.pop(),[4,e(r)];case 1:return n.sent(),[2,t]}}))}))},v=function(t){return t.isEmpty()},y=function(t,e){return l.parseHexInt(t.first().number)>l.parseHexInt(e.number)},m=function(t,e){return t.some((function(t){return t.hash===e.hash}))},k=function(t,e){return t.last().hash===e.parentHash},x=function(t,e){return t.some((function(t){return t.hash===e.parentHash}))}},1265:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,c){function l(t){try{d(n.next(t))}catch(t){c(t)}}function h(t){try{d(n.throw(t))}catch(t){c(t)}}function d(t){t.done?o(t.value):new r((function(e){e(t.value)})).then(l,h)}d((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,body){var e,r,n,g,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,r&&(n=2&c[0]?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){o.label=c[1];break}if(6===c[0]&&o.label<n[1]){o.label=n[1],n=c;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(c);break}n[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],r=0}finally{e=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},c=this;Object.defineProperty(e,"__esModule",{value:!0});var l=r(862);e.reconcileLogHistoryWithAddedBlock=function(t,e,r,l,w,v){return void 0===w&&(w=[]),void 0===v&&(v=100),n(c,void 0,void 0,(function(){var n;return o(this,(function(o){switch(o.label){case 0:return[4,e];case 1:return e=o.sent(),[4,h(t,r,w)];case 2:return n=o.sent(),[4,d(r.hash,e,n,l)];case 3:return e=o.sent(),[4,f(e,r,v)];case 4:return[2,e=o.sent()]}}))}))};var h=function(t,e,r){return n(c,void 0,void 0,(function(){var n;return o(this,(function(o){switch(o.label){case 0:return n=r.map((function(filter){return{blockHash:e.hash,address:filter.address,topics:filter.topics}})).map((function(filter){return t(filter)})),[4,Promise.all(n)];case 1:return[2,o.sent().reduce((function(t,e){return t.concat(e)}),[])]}}))}))},d=function(t,e,r,h){return n(c,void 0,void 0,(function(){var n,c,d,f,v,y;return o(this,(function(o){switch(o.label){case 0:for(n=r.sort((function(t,e){return l.parseHexInt(t.logIndex)-l.parseHexInt(e.logIndex)})),c=[],d=function(t){if(e.some((function(e){return e.blockHash===t.blockHash&&e.logIndex===t.logIndex})))return"continue";w(e.last(),t),e=e.push(t),c.push(t)},f=0,v=n;f<v.length;f++)y=v[f],d(y);return[4,h(t,c)];case 1:return o.sent(),[2,e]}}))}))},f=function(t,e,r){return n(c,void 0,void 0,(function(){return o(this,(function(n){return[2,t.skipUntil((function(t){return l.parseHexInt(e.number)-l.parseHexInt(t.blockNumber)<r})).toList()]}))}))},w=function(t,e){if(void 0!==t){var r=l.parseHexInt(t.blockNumber),n=l.parseHexInt(e.blockNumber);if(r>n)throw new Error("received log for a block ("+n+") older than current head log's block ("+r+")");if(r===n){var o=l.parseHexInt(t.logIndex),c=l.parseHexInt(e.logIndex);if(o>=c)throw new Error("received log with same block number ("+n+") but index ("+c+") is the same or older than previous index ("+o+")")}}};e.reconcileLogHistoryWithRemovedBlock=function(t,e,r){return n(c,void 0,void 0,(function(){var n;return o(this,(function(o){switch(o.label){case 0:return[4,t];case 1:for(t=o.sent(),n=[];!t.isEmpty()&&t.last().blockHash===e.hash;)n.push(t.last()),t=t.pop();return[4,r(e.hash,n)];case 2:if(o.sent(),t.some((function(t){return t.blockHash===e.hash})))throw new Error("found logs for removed block not at head of log history");return[2,t]}}))}))}},862:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseHexInt=function(t){var e=Number.parseInt(t,16);if(!Number.isFinite(e))throw new Error(t+" is not a hex encoded integer, parsing returned "+e+".");return e}}}]);