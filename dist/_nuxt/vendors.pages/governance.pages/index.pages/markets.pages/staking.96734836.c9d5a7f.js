(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1112:function(t,r,e){"use strict";const{callbackify:o}=e(657);var n=e(619).errors,c=e(841),l=e(1120),d=e(1121),m=function t(r,e){this.provider=null,this.providers=t.providers,this.setProvider(r,e),this.subscriptions=new Map};m.givenProvider=d,m.providers={WebsocketProvider:e(1122),HttpProvider:e(1128),IpcProvider:e(1139)},m.prototype.setProvider=function(t,r){var e=this;if(t&&"string"==typeof t&&this.providers)if(/^http(s)?:\/\//i.test(t))t=new this.providers.HttpProvider(t);else if(/^ws(s)?:\/\//i.test(t))t=new this.providers.WebsocketProvider(t);else if(t&&"object"==typeof r&&"function"==typeof r.connect)t=new this.providers.IpcProvider(t,r);else if(t)throw new Error("Can't autodetect provider for \""+t+'"');if(this.provider&&this.provider.connected&&this.clearSubscriptions(),this.provider=t||null,this.provider&&this.provider.on){"function"==typeof t.request?this.provider.on("message",(function(t){if(t&&"eth_subscription"===t.type&&t.data){const data=t.data;data.subscription&&e.subscriptions.has(data.subscription)&&e.subscriptions.get(data.subscription).callback(null,data.result)}})):this.provider.on("data",(function(t,r){(t=t||r).method&&t.params&&t.params.subscription&&e.subscriptions.has(t.params.subscription)&&e.subscriptions.get(t.params.subscription).callback(null,t.params.result)})),this.provider.on("connect",(function(){e.subscriptions.forEach((function(t){t.subscription.resubscribe()}))})),this.provider.on("error",(function(t){e.subscriptions.forEach((function(r){r.callback(t)}))}));const r=function(t){e._isCleanCloseEvent(t)&&!e._isIpcCloseError(t)||(e.subscriptions.forEach((function(r){r.callback(n.ConnectionCloseError(t)),e.subscriptions.delete(r.subscription.id)})),e.provider&&e.provider.emit&&e.provider.emit("error",n.ConnectionCloseError(t))),e.provider&&e.provider.emit&&e.provider.emit("end",t)};this.provider.on("close",r),this.provider.on("disconnect",r)}},m.prototype.send=function(data,t){if(t=t||function(){},!this.provider)return t(n.InvalidProvider());const{method:r,params:e}=data,l=c.toPayload(r,e),d=this._jsonrpcResultCallback(t,l);if(this.provider.request){o(this.provider.request.bind(this.provider))({method:r,params:e},t)}else if(this.provider.sendAsync)this.provider.sendAsync(l,d);else{if(!this.provider.send)throw new Error("Provider does not have a request or send method to use.");this.provider.send(l,d)}},m.prototype.sendBatch=function(data,t){if(!this.provider)return t(n.InvalidProvider());var r=c.toBatchPayload(data);this.provider[this.provider.sendAsync?"sendAsync":"send"](r,(function(r,e){return r?t(r):Array.isArray(e)?void t(null,e):t(n.InvalidResponse(e))}))},m.prototype.addSubscription=function(t,r){if(!this.provider.on)throw new Error("The provider doesn't support subscriptions: "+this.provider.constructor.name);this.subscriptions.set(t.id,{callback:r,subscription:t})},m.prototype.removeSubscription=function(t,r){if(this.subscriptions.has(t)){var e=this.subscriptions.get(t).subscription.options.type;return this.subscriptions.delete(t),void this.send({method:e+"_unsubscribe",params:[t]},r)}"function"==typeof r&&r(null)},m.prototype.clearSubscriptions=function(t){try{var r=this;return this.subscriptions.size>0&&this.subscriptions.forEach((function(e,o){t&&"syncing"===e.name||r.removeSubscription(o)})),this.provider.reset&&this.provider.reset(),!0}catch(t){throw new Error(`Error while clearing subscriptions: ${t}`)}},m.prototype._isCleanCloseEvent=function(t){return"object"==typeof t&&([1e3].includes(t.code)||!0===t.wasClean)},m.prototype._isIpcCloseError=function(t){return"boolean"==typeof t&&t},m.prototype._jsonrpcResultCallback=function(t,r){return function(e,o){return o&&o.id&&r.id!==o.id?t(new Error(`Wrong response id ${o.id} (expected: ${r.id}) in ${JSON.stringify(r)}`)):e?t(e):o&&o.error?t(n.ErrorResponse(o)):c.isValidResponse(o)?void t(null,o.result):t(n.InvalidResponse(o))}},t.exports={Manager:m,BatchManager:l}},1113:function(t,r,e){"use strict";t.exports={ErrorResponse:function(t){var r=t&&t.error&&t.error.message?t.error.message:JSON.stringify(t),data=t.error&&t.error.data?t.error.data:null,e=new Error("Returned error: "+r);return e.data=data,e},InvalidNumberOfParams:function(t,r,e){return new Error('Invalid number of parameters for "'+e+'". Got '+t+" expected "+r+"!")},InvalidConnection:function(t,r){return this.ConnectionError("CONNECTION ERROR: Couldn't connect to node "+t+".",r)},InvalidProvider:function(){return new Error("Provider not set or invalid")},InvalidResponse:function(t){var r=t&&t.error&&t.error.message?t.error.message:"Invalid JSON RPC response: "+JSON.stringify(t);return new Error(r)},ConnectionTimeout:function(t){return new Error("CONNECTION TIMEOUT: timeout of "+t+" ms achived")},ConnectionNotOpenError:function(t){return this.ConnectionError("connection not open on send()",t)},ConnectionCloseError:function(t){return"object"==typeof t&&t.code&&t.reason?this.ConnectionError("CONNECTION ERROR: The connection got closed with the close code `"+t.code+"` and the following reason string `"+t.reason+"`",t):new Error("CONNECTION ERROR: The connection closed unexpectedly")},MaxAttemptsReachedOnReconnectingError:function(){return new Error("Maximum number of reconnect attempts reached!")},PendingRequestsOnReconnectingError:function(){return new Error("CONNECTION ERROR: Provider started to reconnect before the response got received!")},ConnectionError:function(t,r){const e=new Error(t);return r&&(e.code=r.code,e.reason=r.reason),e},RevertInstructionError:function(t,r){var e=new Error("Your request got reverted with the following reason string: "+t);return e.reason=t,e.signature=r,e},TransactionRevertInstructionError:function(t,r,e){var o=new Error("Transaction has been reverted by the EVM:\n"+JSON.stringify(e,null,2));return o.reason=t,o.signature=r,o.receipt=e,o},TransactionError:function(t,r){var e=new Error(t);return e.receipt=r,e},NoContractAddressFoundError:function(t){return this.TransactionError("The transaction receipt didn't contain a contract address.",t)},ContractCodeNotStoredError:function(t){return this.TransactionError("The contract code couldn't be stored, please check your gas limit.",t)},TransactionRevertedWithoutReasonError:function(t){return this.TransactionError("Transaction has been reverted by the EVM:\n"+JSON.stringify(t,null,2),t)},TransactionOutOfGasError:function(t){return this.TransactionError("Transaction ran out of gas. Please provide more gas:\n"+JSON.stringify(t,null,2),t)},ResolverMethodMissingError:function(address,t){return new Error("The resolver at "+address+'does not implement requested method: "'+t+'".')},ContractMissingABIError:function(){return new Error("You must provide the json interface of the contract when instantiating a contract object.")},ContractOnceRequiresCallbackError:function(){return new Error("Once requires a callback as the second parameter.")},ContractEventDoesNotExistError:function(t){return new Error('Event "'+t+"\" doesn't exist in this contract.")},ContractReservedEventError:function(t){return new Error('The event "'+t+"\" is a reserved event name, you can't use it.")},ContractMissingDeployDataError:function(){return new Error('No "data" specified in neither the given options, nor the default options.')},ContractNoAddressDefinedError:function(){return new Error("This contract object doesn't have address set yet, please set an address first.")},ContractNoFromAddressDefinedError:function(){return new Error('No "from" address specified in neither the given options, nor the default options.')}}},1114:function(t,r,e){"use strict";var o=e(625),n=e(840),c=function(t){return o.toBN(t).toString(10)},l=function(t){if(void 0!==t)return function(t){return"latest"===t||"pending"===t||"earliest"===t}(t)?t:"genesis"===t?"0x0":o.isHexStrict(t)?"string"==typeof t?t.toLowerCase():t:o.numberToHex(t)},d=function(t){if(t.to&&(t.to=h(t.to)),t.data&&t.input)throw new Error('You can\'t have "data" and "input" as properties of transactions at the same time, please use either "data" or "input" instead.');if(!t.data&&t.input&&(t.data=t.input,delete t.input),t.data&&!t.data.startsWith("0x")&&(t.data="0x"+t.data),t.data&&!o.isHex(t.data))throw new Error("The data field must be HEX encoded data.");return(t.gas||t.gasLimit)&&(t.gas=t.gas||t.gasLimit),(t.maxPriorityFeePerGas||t.maxFeePerGas)&&delete t.gasPrice,["gasPrice","gas","value","maxPriorityFeePerGas","maxFeePerGas","nonce"].filter((function(r){return void 0!==t[r]})).forEach((function(r){t[r]=o.numberToHex(t[r])})),t},m=function(t){return null!==t.blockNumber&&(t.blockNumber=o.hexToNumber(t.blockNumber)),null!==t.transactionIndex&&(t.transactionIndex=o.hexToNumber(t.transactionIndex)),t.nonce=o.hexToNumber(t.nonce),t.gas=o.hexToNumber(t.gas),t.gasPrice&&(t.gasPrice=c(t.gasPrice)),t.maxFeePerGas&&(t.maxFeePerGas=c(t.maxFeePerGas)),t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=c(t.maxPriorityFeePerGas)),t.type&&(t.type=o.hexToNumber(t.type)),t.value=c(t.value),t.to&&o.isAddress(t.to)?t.to=o.toChecksumAddress(t.to):t.to=null,t.from&&(t.from=o.toChecksumAddress(t.from)),t},f=function(t){if("string"==typeof t.blockHash&&"string"==typeof t.transactionHash&&"string"==typeof t.logIndex){var r=o.sha3(t.blockHash.replace("0x","")+t.transactionHash.replace("0x","")+t.logIndex.replace("0x",""));t.id="log_"+r.replace("0x","").substr(0,8)}else t.id||(t.id=null);return null!==t.blockNumber&&(t.blockNumber=o.hexToNumber(t.blockNumber)),null!==t.transactionIndex&&(t.transactionIndex=o.hexToNumber(t.transactionIndex)),null!==t.logIndex&&(t.logIndex=o.hexToNumber(t.logIndex)),t.address&&(t.address=o.toChecksumAddress(t.address)),t},h=function(address){var t=new n(address);if(t.isValid()&&t.isDirect())return t.toAddress().toLowerCase();if(o.isAddress(address))return"0x"+address.toLowerCase().replace("0x","");throw new Error(`Provided address ${address} is invalid, the capitalization checksum test failed, or it's an indirect IBAN address which can't be converted.`)};t.exports={inputDefaultBlockNumberFormatter:function(t){return l(this&&null==t?this.defaultBlock:t)},inputBlockNumberFormatter:l,inputCallFormatter:function(t){var r=(t=d(t)).from||(this?this.defaultAccount:null);return r&&(t.from=h(r)),t},inputTransactionFormatter:function(t){if("number"!=typeof(t=d(t)).from&&(!t.from||"object"!=typeof t.from)){if(t.from=t.from||(this?this.defaultAccount:null),!t.from&&"number"!=typeof t.from)throw new Error('The send transactions "from" field must be defined!');t.from=h(t.from)}return t},inputAddressFormatter:h,inputPostFormatter:function(t){return t.ttl&&(t.ttl=o.numberToHex(t.ttl)),t.workToProve&&(t.workToProve=o.numberToHex(t.workToProve)),t.priority&&(t.priority=o.numberToHex(t.priority)),Array.isArray(t.topics)||(t.topics=t.topics?[t.topics]:[]),t.topics=t.topics.map((function(t){return 0===t.indexOf("0x")?t:o.fromUtf8(t)})),t},inputLogFormatter:function(t){var r=function(t){return null==t?null:0===(t=String(t)).indexOf("0x")?t:o.fromUtf8(t)};return void 0===t&&(t={}),void 0===t.fromBlock&&(t={...t,fromBlock:"latest"}),(t.fromBlock||0===t.fromBlock)&&(t.fromBlock=l(t.fromBlock)),(t.toBlock||0===t.toBlock)&&(t.toBlock=l(t.toBlock)),t.topics=t.topics||[],t.topics=t.topics.map((function(t){return Array.isArray(t)?t.map(r):r(t)})),r=null,t.address&&(t.address=Array.isArray(t.address)?t.address.map((function(t){return h(t)})):h(t.address)),t},inputSignFormatter:function(data){return o.isHexStrict(data)?data:o.utf8ToHex(data)},inputStorageKeysFormatter:function(t){return t.map(o.numberToHex)},outputProofFormatter:function(t){return t.address=o.toChecksumAddress(t.address),t.nonce=o.hexToNumberString(t.nonce),t.balance=o.hexToNumberString(t.balance),t},outputBigNumberFormatter:c,outputTransactionFormatter:m,outputTransactionReceiptFormatter:function(t){if("object"!=typeof t)throw new Error("Received receipt is invalid: "+t);return null!==t.blockNumber&&(t.blockNumber=o.hexToNumber(t.blockNumber)),null!==t.transactionIndex&&(t.transactionIndex=o.hexToNumber(t.transactionIndex)),t.cumulativeGasUsed=o.hexToNumber(t.cumulativeGasUsed),t.gasUsed=o.hexToNumber(t.gasUsed),Array.isArray(t.logs)&&(t.logs=t.logs.map(f)),t.contractAddress&&(t.contractAddress=o.toChecksumAddress(t.contractAddress)),void 0!==t.status&&null!==t.status&&(t.status=Boolean(parseInt(t.status))),t},outputBlockFormatter:function(t){return t.gasLimit=o.hexToNumber(t.gasLimit),t.gasUsed=o.hexToNumber(t.gasUsed),t.size=o.hexToNumber(t.size),t.timestamp=o.hexToNumber(t.timestamp),null!==t.number&&(t.number=o.hexToNumber(t.number)),t.difficulty&&(t.difficulty=c(t.difficulty)),t.totalDifficulty&&(t.totalDifficulty=c(t.totalDifficulty)),Array.isArray(t.transactions)&&t.transactions.forEach((function(t){if("string"!=typeof t)return m(t)})),t.miner&&(t.miner=o.toChecksumAddress(t.miner)),t},outputLogFormatter:f,outputPostFormatter:function(t){return t.expiry=o.hexToNumber(t.expiry),t.sent=o.hexToNumber(t.sent),t.ttl=o.hexToNumber(t.ttl),t.workProved=o.hexToNumber(t.workProved),t.topics||(t.topics=[]),t.topics=t.topics.map((function(t){return o.toUtf8(t)})),t},outputSyncingFormatter:function(t){return t.startingBlock=o.hexToNumber(t.startingBlock),t.currentBlock=o.hexToNumber(t.currentBlock),t.highestBlock=o.hexToNumber(t.highestBlock),t.knownStates&&(t.knownStates=o.hexToNumber(t.knownStates),t.pulledStates=o.hexToNumber(t.pulledStates)),t}}},1120:function(t,r,e){"use strict";var o=e(841),n=e(619).errors,c=function(t){this.requestManager=t,this.requests=[]};c.prototype.add=function(t){this.requests.push(t)},c.prototype.execute=function(){var t=this.requests;this.requestManager.sendBatch(t,(function(r,e){e=e||[],t.map((function(t,r){return e[r]||{}})).forEach((function(r,e){if(t[e].callback){if(r&&r.error)return t[e].callback(n.ErrorResponse(r));if(!o.isValidResponse(r))return t[e].callback(n.InvalidResponse(r));try{t[e].callback(null,t[e].format?t[e].format(r.result):r.result)}catch(r){t[e].callback(r)}}}))}))},t.exports=c},1121:function(t,r,e){"use strict";var o,n=null;try{o=Function("return this")()}catch(t){o=window}void 0!==o.ethereum?n=o.ethereum:void 0!==o.web3&&o.web3.currentProvider&&(o.web3.currentProvider.sendAsync&&(o.web3.currentProvider.send=o.web3.currentProvider.sendAsync,delete o.web3.currentProvider.sendAsync),!o.web3.currentProvider.on&&o.web3.currentProvider.connection&&"ipcProviderWrapper"===o.web3.currentProvider.connection.constructor.name&&(o.web3.currentProvider.on=function(t,r){if("function"!=typeof r)throw new Error("The second parameter callback must be a function.");if("data"===t)this.connection.on("data",(function(data){var t="";data=data.toString();try{t=JSON.parse(data)}catch(t){return r(new Error("Couldn't parse response data"+data))}t.id||-1===t.method.indexOf("_subscription")||r(null,t)}));else this.connection.on(t,r)}),n=o.web3.currentProvider),t.exports=n},1142:function(t,r,e){"use strict";var o=e(619).errors,n=e(741),c=e(619).formatters;function l(t){return t}function d(t){n.call(this),this.id=null,this.callback=l,this.arguments=null,this.lastBlock=null,this.options={subscription:t.subscription,type:t.type,requestManager:t.requestManager}}d.prototype=Object.create(n.prototype),d.prototype.constructor=d,d.prototype._extractCallback=function(t){if("function"==typeof t[t.length-1])return t.pop()},d.prototype._validateArgs=function(t){var r=this.options.subscription;if(r||(r={}),r.params||(r.params=0),t.length!==r.params)throw o.InvalidNumberOfParams(t.length,r.params,r.subscriptionName)},d.prototype._formatInput=function(t){var r=this.options.subscription;return r&&r.inputFormatter?r.inputFormatter.map((function(r,e){return r?r(t[e]):t[e]})):t},d.prototype._formatOutput=function(t){var r=this.options.subscription;return r&&r.outputFormatter&&t?r.outputFormatter(t):t},d.prototype._toPayload=function(t){var r=[];if(this.callback=this._extractCallback(t)||l,this.subscriptionMethod||(this.subscriptionMethod=t.shift(),this.options.subscription.subscriptionName&&(this.subscriptionMethod=this.options.subscription.subscriptionName)),this.arguments||(this.arguments=this._formatInput(t),this._validateArgs(this.arguments),t=[]),r.push(this.subscriptionMethod),r=r.concat(this.arguments),t.length)throw new Error("Only a callback is allowed as parameter on an already instantiated subscription.");return{method:this.options.type+"_subscribe",params:r}},d.prototype.unsubscribe=function(t){this.options.requestManager.removeSubscription(this.id,t),this.id=null,this.lastBlock=null,this.removeAllListeners()},d.prototype.subscribe=function(){var t=this,r=Array.prototype.slice.call(arguments),e=this._toPayload(r);if(!e)return this;if(!this.options.requestManager.provider)return setTimeout((function(){var r=new Error("No provider set.");t.callback(r,null,t),t.emit("error",r)}),0),this;if(!this.options.requestManager.provider.on)return setTimeout((function(){var r=new Error("The current provider doesn't support subscriptions: "+t.options.requestManager.provider.constructor.name);t.callback(r,null,t),t.emit("error",r)}),0),this;if(this.lastBlock&&this.options.params&&"object"==typeof this.options.params&&(e.params[1]=this.options.params,e.params[1].fromBlock=c.inputBlockNumberFormatter(this.lastBlock+1)),this.id&&this.unsubscribe(),this.options.params=e.params[1],"logs"===e.params[0]&&e.params[1]&&"object"==typeof e.params[1]&&e.params[1].hasOwnProperty("fromBlock")&&isFinite(e.params[1].fromBlock)){var o=Object.assign({},e.params[1]);this.options.requestManager.send({method:"eth_getLogs",params:[o]},(function(r,e){r?setTimeout((function(){t.callback(r,null,t),t.emit("error",r)}),0):e.forEach((function(r){var output=t._formatOutput(r);t.callback(null,output,t),t.emit("data",output)}))}))}return"object"==typeof e.params[1]&&delete e.params[1].fromBlock,this.options.requestManager.send(e,(function(r,o){!r&&o?(t.id=o,t.method=e.params[0],t.emit("connected",o),t.options.requestManager.addSubscription(t,(function(r,e){r?(t.callback(r,!1,t),t.emit("error",r)):(Array.isArray(e)||(e=[e]),e.forEach((function(r){var output=t._formatOutput(r);if(t.lastBlock=output&&"object"==typeof output?output.blockNumber:null,"function"==typeof t.options.subscription.subscriptionHandler)return t.options.subscription.subscriptionHandler.call(t,output);t.emit("data",output),t.callback(null,output,t)})))}))):setTimeout((function(){t.callback(r,!1,t),t.emit("error",r)}),0)})),this},d.prototype.resubscribe=function(){this.options.requestManager.removeSubscription(this.id),this.id=null,this.subscribe(this.callback)},t.exports=d},1242:function(t,r,e){"use strict";var o=e(1243),n=function t(r){this.givenProvider=t.givenProvider,r&&r._requestManager&&(r=r.currentProvider),"undefined"!=typeof document&&(this.pick=o.pick),this.setProvider(r)};n.givenProvider=null,"undefined"!=typeof ethereum&&ethereum.bzz&&(n.givenProvider=ethereum.bzz),n.prototype.setProvider=function(t){if(t&&"object"==typeof t&&"string"==typeof t.bzz&&(t=t.bzz),"string"!=typeof t){this.currentProvider=null;var r=new Error("No provider set, please set one using bzz.setProvider().");return this.download=this.upload=this.isAvailable=function(){throw r},!1}return this.currentProvider=t,this.download=o.at(t).download,this.upload=o.at(t).upload,this.isAvailable=o.at(t).isAvailable,!0},t.exports=n},619:function(t,r,e){"use strict";var o=e(1113),n=e(1114);t.exports={errors:o,formatters:n}},644:function(t,r,e){"use strict";var o=e(619).errors,n=e(619).formatters,c=e(625),l=e(694),d=e(695).subscriptions,m=e(632),f=function(t){if(!t.call||!t.name)throw new Error('When creating a method you need to provide at least the "name" and "call" property.');this.name=t.name,this.call=t.call,this.params=t.params||0,this.inputFormatter=t.inputFormatter,this.outputFormatter=t.outputFormatter,this.transformPayload=t.transformPayload,this.extraFormatters=t.extraFormatters,this.abiCoder=t.abiCoder,this.requestManager=t.requestManager,this.accounts=t.accounts,this.defaultBlock=t.defaultBlock||"latest",this.defaultAccount=t.defaultAccount||null,this.transactionBlockTimeout=t.transactionBlockTimeout||50,this.transactionConfirmationBlocks=t.transactionConfirmationBlocks||24,this.transactionPollingTimeout=t.transactionPollingTimeout||750,this.defaultCommon=t.defaultCommon,this.defaultChain=t.defaultChain,this.defaultHardfork=t.defaultHardfork,this.handleRevert=t.handleRevert};f.prototype.setRequestManager=function(t,r){this.requestManager=t,r&&(this.accounts=r)},f.prototype.createFunction=function(t,r){var e=this.buildCall();return e.call=this.call,this.setRequestManager(t||this.requestManager,r||this.accounts),e},f.prototype.attachToObject=function(t){var r=this.buildCall();r.call=this.call;var e=this.name.split(".");e.length>1?(t[e[0]]=t[e[0]]||{},t[e[0]][e[1]]=r):t[e[0]]=r},f.prototype.getCall=function(t){return"function"==typeof this.call?this.call(t):this.call},f.prototype.extractCallback=function(t){if("function"==typeof t[t.length-1])return t.pop()},f.prototype.validateArgs=function(t){if(t.length!==this.params)throw o.InvalidNumberOfParams(t.length,this.params,this.name)},f.prototype.formatInput=function(t){var r=this;return this.inputFormatter?this.inputFormatter.map((function(e,o){return e?e.call(r,t[o]):t[o]})):t},f.prototype.formatOutput=function(t){var r=this;return Array.isArray(t)?t.map((function(t){return r.outputFormatter&&t?r.outputFormatter(t):t})):this.outputFormatter&&t?this.outputFormatter(t):t},f.prototype.toPayload=function(t){var r=this.getCall(t),e=this.extractCallback(t),o=this.formatInput(t);this.validateArgs(o);var n={method:r,params:o,callback:e};return this.transformPayload&&(n=this.transformPayload(n)),n},f.prototype._confirmTransaction=function(t,r,e){var h=this,v=!1,y=!0,E=0,w=0,k=null,x=null,P=e.params[0]&&"object"==typeof e.params[0]&&e.params[0].gas?e.params[0].gas:null,T=!!e.params[0]&&"object"==typeof e.params[0]&&e.params[0].data&&e.params[0].from&&!e.params[0].to,N=T&&e.params[0].data.length>2,F=[new f({name:"getBlockByNumber",call:"eth_getBlockByNumber",params:2,inputFormatter:[n.inputBlockNumberFormatter,function(t){return!!t}],outputFormatter:n.outputBlockFormatter}),new f({name:"getTransactionReceipt",call:"eth_getTransactionReceipt",params:1,inputFormatter:[null],outputFormatter:n.outputTransactionReceiptFormatter}),new f({name:"getCode",call:"eth_getCode",params:2,inputFormatter:[n.inputAddressFormatter,n.inputDefaultBlockNumberFormatter]}),new f({name:"getTransactionByHash",call:"eth_getTransactionByHash",params:1,inputFormatter:[null],outputFormatter:n.outputTransactionFormatter}),new d({name:"subscribe",type:"eth",subscriptions:{newBlockHeaders:{subscriptionName:"newHeads",params:0,outputFormatter:n.outputBlockFormatter}}})],C={};F.forEach((t=>{t.attachToObject(C),t.requestManager=h.requestManager}));var B=function(d,f,F,B,sub){if(!F)return sub||(sub={unsubscribe:function(){clearInterval(k)}}),(d?l.resolve(d):C.getTransactionReceipt(r)).catch((function(r){sub.unsubscribe(),v=!0,c._fireError({message:"Failed to check for transaction receipt:",data:r},t.eventEmitter,t.reject)})).then((async function(r){if(!r||!r.blockHash)throw new Error("Receipt missing or blockHash null");if(h.extraFormatters&&h.extraFormatters.receiptFormatter&&(r=h.extraFormatters.receiptFormatter(r)),t.eventEmitter.listeners("confirmation").length>0){var e;if(void 0===d||0!==w){var o=await C.getBlockByNumber("latest"),n=o?o.hash:null;f?x?(e=await C.getBlockByNumber(x.number+1))&&(x=e,t.eventEmitter.emit("confirmation",w,r,n)):(e=await C.getBlockByNumber(r.blockNumber),x=e,t.eventEmitter.emit("confirmation",w,r,n)):t.eventEmitter.emit("confirmation",w,r,n)}(f&&e||!f)&&w++,y=!1,w===h.transactionConfirmationBlocks+1&&(sub.unsubscribe(),t.eventEmitter.removeAllListeners())}return r})).then((async function(r){if(T&&!v){if(!r.contractAddress)return y&&(sub.unsubscribe(),v=!0),void c._fireError(o.NoContractAddressFoundError(r),t.eventEmitter,t.reject,null,r);var code;try{code=await C.getCode(r.contractAddress)}catch(t){}if(!code)return;!0===r.status&&N||code.length>2?(t.eventEmitter.emit("receipt",r),h.extraFormatters&&h.extraFormatters.contractDeployFormatter?t.resolve(h.extraFormatters.contractDeployFormatter(r)):t.resolve(r),y&&t.eventEmitter.removeAllListeners()):c._fireError(o.ContractCodeNotStoredError(r),t.eventEmitter,t.reject,null,r),y&&sub.unsubscribe(),v=!0}return r})).then((async function(r){if(!T&&!v){if(r.outOfGas||P&&P===r.gasUsed||!0!==r.status&&"0x1"!==r.status&&void 0!==r.status)if(JSON.stringify(r,null,2),!1===r.status||"0x0"===r.status)try{var l=null;if(!h.handleRevert||"eth_sendTransaction"!==h.call&&"eth_sendRawTransaction"!==h.call)throw!1;var d=e.params[0];if("eth_sendRawTransaction"===h.call){var f=e.params[0],E=m.parse(f);d=n.inputTransactionFormatter({data:E.data,to:E.to,from:E.from,gas:E.gasLimit.toHexString(),gasPrice:E.gasPrice.toHexString(),value:E.value.toHexString()})}if(!(l=await h.getRevertReason(d,r.blockNumber)))throw!1;c._fireError(o.TransactionRevertInstructionError(l.reason,l.signature,r),t.eventEmitter,t.reject,null,r)}catch(e){c._fireError(o.TransactionRevertedWithoutReasonError(r),t.eventEmitter,t.reject,null,r)}else c._fireError(o.TransactionOutOfGasError(r),t.eventEmitter,t.reject,null,r);else t.eventEmitter.emit("receipt",r),t.resolve(r),y&&t.eventEmitter.removeAllListeners();y&&sub.unsubscribe(),v=!0}})).catch((function(){E++,f?E-1>=h.transactionPollingTimeout&&(sub.unsubscribe(),v=!0,c._fireError(o.TransactionError("Transaction was not mined within "+h.transactionPollingTimeout+" seconds, please make sure your transaction was properly sent. Be aware that it might still be mined!"),t.eventEmitter,t.reject)):E-1>=h.transactionBlockTimeout&&(sub.unsubscribe(),v=!0,c._fireError(o.TransactionError("Transaction was not mined within "+h.transactionBlockTimeout+" blocks, please make sure your transaction was properly sent. Be aware that it might still be mined!"),t.eventEmitter,t.reject))}));sub.unsubscribe(),v=!0,c._fireError({message:"Failed to subscribe to new newBlockHeaders to confirm the transaction receipts.",data:F},t.eventEmitter,t.reject)},R=function(t){const r=()=>{k=setInterval(B.bind(null,t,!0),1e3)};this.requestManager.provider.on?C.subscribe("newBlockHeaders",(function(e,o,sub){e||!o?r():B(t,!1,e,0,sub)})):r()}.bind(this);C.getTransactionReceipt(r).then((function(r){r&&r.blockHash?(t.eventEmitter.listeners("confirmation").length>0&&R(r),B(r,!1)):v||R()})).catch((function(){v||R()}))};var h=function(t,r){return"number"==typeof t?r.wallet[t]:t&&"object"==typeof t&&t.address&&t.privateKey?t:r.wallet[t.toLowerCase()]};function v(t,r){return new Promise(((e,o)=>{try{var n=new f({name:"getBlockByNumber",call:"eth_getBlockByNumber",params:2,inputFormatter:[function(t){return t?c.toHex(t):"latest"},function(){return!1}]}).createFunction(t.requestManager),l=new f({name:"getGasPrice",call:"eth_gasPrice",params:0}).createFunction(t.requestManager);Promise.all([n(),l()]).then((t=>{const[o,n]=t;if(("0x2"===r.type||void 0===r.type)&&o&&o.baseFeePerGas){let t,n;r.gasPrice?(t=r.gasPrice,n=r.gasPrice,delete r.gasPrice):(t=r.maxPriorityFeePerGas||"0x9502F900",n=r.maxFeePerGas||c.toHex(c.toBN(o.baseFeePerGas).mul(c.toBN(2)).add(c.toBN(t)))),e({maxFeePerGas:n,maxPriorityFeePerGas:t})}else{if(r.maxPriorityFeePerGas||r.maxFeePerGas)throw Error("Network doesn't support eip-1559");e({gasPrice:n})}}))}catch(t){o(t)}}))}f.prototype.buildCall=function(){var t=this,r="eth_sendTransaction"===t.call||"eth_sendRawTransaction"===t.call,e="eth_call"===t.call,n=function(){var n=l(!r),d=t.toPayload(Array.prototype.slice.call(arguments)),m=function(l,m){var f;if(t.handleRevert&&e&&t.abiCoder&&(!l&&t.isRevertReasonString(m)?f=m.substring(10):l&&l.data&&(f=l.data.substring(10)),f)){var h=t.abiCoder.decodeParameter("string","0x"+f),v="Error(String)";return void c._fireError(o.RevertInstructionError(h,v),n.eventEmitter,n.reject,d.callback,{reason:h,signature:v})}try{m=t.formatOutput(m)}catch(t){l=t}if(m instanceof Error&&(l=m),l)return l.error&&(l=l.error),c._fireError(l,n.eventEmitter,n.reject,d.callback);d.callback&&d.callback(null,m),r?(n.eventEmitter.emit("transactionHash",m),t._confirmTransaction(n,m,d)):l||n.resolve(m)},f=function(r){var e={...d,method:"eth_sendRawTransaction",params:[r.rawTransaction]};t.requestManager.send(e,m)},y=function(t,r){var e;if(r&&r.accounts&&r.accounts.wallet&&r.accounts.wallet.length)if("eth_sendTransaction"===t.method){var o=t.params[0];if((e=h(o&&"object"==typeof o?o.from:null,r.accounts))&&e.privateKey)return delete(o=JSON.parse(JSON.stringify(o))).from,r.defaultChain&&!o.chain&&(o.chain=r.defaultChain),r.defaultHardfork&&!o.hardfork&&(o.hardfork=r.defaultHardfork),r.defaultCommon&&!o.common&&(o.common=r.defaultCommon),void r.accounts.signTransaction(o,e.privateKey).then(f).catch((function(t){if("function"==typeof n.eventEmitter.listeners&&n.eventEmitter.listeners("error").length){try{n.eventEmitter.emit("error",t)}catch(t){}n.eventEmitter.removeAllListeners(),n.eventEmitter.catch((function(){}))}n.reject(t)}))}else if("eth_sign"===t.method){var data=t.params[1];if((e=h(t.params[0],r.accounts))&&e.privateKey){var c=r.accounts.sign(data,e.privateKey);return t.callback&&t.callback(null,c.signature),void n.resolve(c.signature)}}return r.requestManager.send(t,m)};return r&&d.params[0]&&"object"==typeof d.params[0]&&void 0===d.params[0].gasPrice&&(void 0===d.params[0].maxPriorityFeePerGas||void 0===d.params[0].maxFeePerGas)?v(t,d.params[0]).then((e=>{void 0!==e.gasPrice?d.params[0].gasPrice=e.gasPrice:void 0!==e.maxPriorityFeePerGas&&void 0!==e.maxFeePerGas&&(d.params[0].maxPriorityFeePerGas=e.maxPriorityFeePerGas,d.params[0].maxFeePerGas=e.maxFeePerGas),r&&setTimeout((()=>{n.eventEmitter.emit("sending",d)}),0),y(d,t)})):(r&&setTimeout((()=>{n.eventEmitter.emit("sending",d)}),0),y(d,t)),r&&setTimeout((()=>{n.eventEmitter.emit("sent",d)}),0),n.eventEmitter};return n.method=t,n.request=this.request.bind(this),n},f.prototype.getRevertReason=function(t,r){var e=this;return new Promise((function(o,n){new f({name:"call",call:"eth_call",params:2,abiCoder:e.abiCoder,handleRevert:!0}).createFunction(e.requestManager)(t,c.numberToHex(r)).then((function(){o(!1)})).catch((function(t){t.reason?o({reason:t.reason,signature:t.signature}):n(t)}))}))},f.prototype.isRevertReasonString=function(data){return"string"==typeof data&&(data.length-2)/2%32==4&&"0x08c379a0"===data.substring(0,10)},f.prototype.request=function(){var t=this.toPayload(Array.prototype.slice.call(arguments));return t.format=this.formatOutput.bind(this),t},t.exports=f},694:function(t,r,e){"use strict";var o=e(741),n=function(t){var r,e,n=new Promise((function(){r=arguments[0],e=arguments[1]}));if(t)return{resolve:r,reject:e,eventEmitter:n};var c=new o;return n._events=c._events,n.emit=c.emit,n.on=c.on,n.once=c.once,n.off=c.off,n.listeners=c.listeners,n.addListener=c.addListener,n.removeListener=c.removeListener,n.removeAllListeners=c.removeAllListeners,{resolve:r,reject:e,eventEmitter:n}};n.resolve=function(t){var r=n(!0);return r.resolve(t),r.eventEmitter},t.exports=n},695:function(t,r,e){"use strict";var o=e(1142),n=function(t){this.name=t.name,this.type=t.type,this.subscriptions=t.subscriptions||{},this.requestManager=null};n.prototype.setRequestManager=function(t){this.requestManager=t},n.prototype.attachToObject=function(t){var r=this.buildCall(),e=this.name.split(".");e.length>1?(t[e[0]]=t[e[0]]||{},t[e[0]][e[1]]=r):t[e[0]]=r},n.prototype.buildCall=function(){var t=this;return function(){t.subscriptions[arguments[0]]||console.warn("Subscription "+JSON.stringify(arguments[0])+" doesn't exist. Subscribing anyway.");var r=new o({subscription:t.subscriptions[arguments[0]]||{},requestManager:t.requestManager,type:t.type});return r.subscribe.apply(r,arguments)}},t.exports={subscriptions:n,subscription:o}},841:function(t,r,e){"use strict";var o={messageId:0,toPayload:function(t,r){if(!t)throw new Error('JSONRPC method should be specified for params: "'+JSON.stringify(r)+'"!');return o.messageId++,{jsonrpc:"2.0",id:o.messageId,method:t,params:r||[]}},isValidResponse:function(t){return Array.isArray(t)?t.every(r):r(t);function r(t){return!(!t||t.error||"2.0"!==t.jsonrpc||"number"!=typeof t.id&&"string"!=typeof t.id||void 0===t.result)}},toBatchPayload:function(t){return t.map((function(t){return o.toPayload(t.method,t.params)}))}};t.exports=o}}]);